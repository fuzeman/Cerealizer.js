!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n():e.mylib=n()}(this,function(){var e,n,t;return function(r){function u(e,n){return j.call(e,n)}function i(e,n){var t,r,u,i,o,p,d,l,f,a,s,c=n&&n.split("/"),m=y.map,_=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(n){for(c=c.slice(0,c.length-1),e=e.split("/"),o=e.length-1,y.nodeIdCompat&&v.test(e[o])&&(e[o]=e[o].replace(v,"")),e=c.concat(e),f=0;f<e.length;f+=1)if(s=e[f],"."===s)e.splice(f,1),f-=1;else if(".."===s){if(1===f&&(".."===e[2]||".."===e[0]))break;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((c||_)&&m){for(t=e.split("/"),f=t.length;f>0;f-=1){if(r=t.slice(0,f).join("/"),c)for(a=c.length;a>0;a-=1)if(u=m[c.slice(0,a).join("/")],u&&(u=u[r])){i=u,p=f;break}if(i)break;!d&&_&&_[r]&&(d=_[r],l=f)}!i&&d&&(i=d,p=l),i&&(t.splice(0,p,i),e=t.join("/"))}return e}function o(e,n){return function(){return c.apply(r,w.call(arguments,0).concat([e,n]))}}function p(e){return function(n){return i(n,e)}}function d(e){return function(n){b[e]=n}}function l(e){if(u(h,e)){var n=h[e];delete h[e],g[e]=!0,s.apply(r,n)}if(!u(b,e)&&!u(g,e))throw new Error("No "+e);return b[e]}function f(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function a(e){return function(){return y&&y.config&&y.config[e]||{}}}var s,c,m,_,b={},h={},y={},g={},j=Object.prototype.hasOwnProperty,w=[].slice,v=/\.js$/;m=function(e,n){var t,r=f(e),u=r[0];return e=r[1],u&&(u=i(u,n),t=l(u)),u?e=t&&t.normalize?t.normalize(e,p(n)):i(e,n):(e=i(e,n),r=f(e),u=r[0],e=r[1],u&&(t=l(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:t}},_={require:function(e){return o(e)},exports:function(e){var n=b[e];return"undefined"!=typeof n?n:b[e]={}},module:function(e){return{id:e,uri:"",exports:b[e],config:a(e)}}},s=function(e,n,t,i){var p,f,a,s,c,y,j=[],w=typeof t;if(i=i||e,"undefined"===w||"function"===w){for(n=!n.length&&t.length?["require","exports","module"]:n,c=0;c<n.length;c+=1)if(s=m(n[c],i),f=s.f,"require"===f)j[c]=_.require(e);else if("exports"===f)j[c]=_.exports(e),y=!0;else if("module"===f)p=j[c]=_.module(e);else if(u(b,f)||u(h,f)||u(g,f))j[c]=l(f);else{if(!s.p)throw new Error(e+" missing "+f);s.p.load(s.n,o(i,!0),d(f),{}),j[c]=b[f]}a=t?t.apply(b[e],j):void 0,e&&(p&&p.exports!==r&&p.exports!==b[e]?b[e]=p.exports:a===r&&y||(b[e]=a))}else e&&(b[e]=t)},e=n=c=function(e,n,t,u,i){if("string"==typeof e)return _[e]?_[e](n):l(m(e,n).f);if(!e.splice){if(y=e,y.deps&&c(y.deps,y.callback),!n)return;n.splice?(e=n,n=t,t=null):e=r}return n=n||function(){},"function"==typeof t&&(t=u,u=i),u?s(r,e,n,t):setTimeout(function(){s(r,e,n,t)},4),c},c.config=function(e){return c(e)},e._defined=b,t=function(e,n,t){n.splice||(t=n,n=[]),u(b,e)||u(h,e)||(h[e]=[e,n,t])},t.amd={jQuery:!0}}(),t("almond",function(){}),t("buffer",[],function(){function e(e){this.value=e||"",this.position=0}return e.prototype.read=function(e){var n=this.value.substr(this.position,e);return this.position+=e,n},e.prototype.readline=function(){var e=this.value.indexOf("\n",this.position);-1==e?e=this.value.length:e+=1;var n=e-this.position,t=this.value.substr(this.position,n);return this.position+=n,t},e.prototype.write=function(e){"string"!=typeof e&&(e=e.toString()),this.value+=e,this.position+=e.length},e}),t("handlers",[],function(){function e(e,n){"string"!=typeof e&&(e=t.getType(e)),t.byName[n.name]=n,t.byType[e]=n}function n(e){var n=0;for(var t in e){if(!e.hasOwnProperty(t)||"_id"==t)break;++n}return n}var t={byName:{},byType:{},lastId:0,getType:function(e){var n=Object.prototype.toString.call(e);return n.substr(8,n.length-9)}},r={collect:function(e,n){return"undefined"==typeof e._id&&(e._id=++t.lastId),-1==n.objs_id.indexOf(e._id)?(n.objs.push(e),n.objs_id.push(e._id),!0):!1},dump_obj:function(e,n,t){t.write(this.name)},dump_ref:function(e,n,t){t.write("r"),t.write(n.id2id[e._id]),t.write("\n")}};e({},{name:"dict\n",type:"class",dump_obj:r.dump_obj,dump_ref:r.dump_ref,collect:function(e,n){if(r.collect(e,n)){var t;for(t in e){if(!e.hasOwnProperty(t)||"_id"==t)break;n.collect(t)}for(t in e){if(!e.hasOwnProperty(t)||"_id"==t)break;n.collect(e[t])}return!0}return!1},dump_data:function(e,r,u){u.write(n(e)),u.write("\n");for(var i in e){if(!e.hasOwnProperty(i)||"_id"==i)break;var o=e[i];t.byType[t.getType(o)].dump_ref(o,r,u),t.byType[t.getType(i)].dump_ref(i,r,u)}},undump_obj:function(){return{}},undump_data:function(e,n,t){for(var r=parseInt(t.readline()),u=0;r>u;++u){var i=n.undump_ref(t),o=n.undump_ref(t);e[o]=i}}});var u={name:"list\n",type:"class",dump_obj:r.dump_obj,dump_ref:r.dump_ref,collect:function(e,n){if(r.collect(e,n)){for(var t=0;t<e.length;++t)n.collect(e[t]);return!0}return!1},dump_data:function(e,n,r){r.write(e.length),r.write("\n");for(var u=0;u<e.length;++u){var i=e[u];t.byType[t.getType(i)].dump_ref(i,n,r)}},undump_obj:function(){return[]},undump_data:function(e,n,t){for(var r=parseInt(t.readline()),u=0;r>u;++u)e.push(n.undump_ref(t))}};return e([],u),e("frozenset",{name:"frozenset\n",type:"class",dump_obj:r.dump_obj,dump_ref:r.dump_ref,collect:u.collect,dump_data:u.dump_data,undump_obj:u.undump_obj,undump_data:u.undump_data}),e("set",{name:"set\n",type:"class",dump_obj:r.dump_obj,dump_ref:r.dump_ref,collect:u.collect,dump_data:u.dump_data,undump_obj:u.undump_obj,undump_data:u.undump_data}),e("tuple",{name:"tuple\n",type:"class",dump_obj:r.dump_obj,dump_ref:r.dump_ref,collect:u.collect,dump_data:u.dump_data,undump_obj:u.undump_obj,undump_data:u.undump_data}),e("Boolean",{type:"reference",collect:function(){},dump_obj:function(){},dump_data:function(){},dump_ref:function(e,n,t){t.write("b"),t.write(e?1:0)}}),e("Null",{type:"reference",collect:function(){},dump_obj:function(){},dump_data:function(){},dump_ref:function(e,n,t){t.write("n")}}),e("Number",{type:"reference",collect:function(){},dump_obj:function(){},dump_data:function(){},dump_ref:function(e,n,t){e%1>0?(t.write("f"),t.write(e)):e>2147483647?(t.write("l"),t.write(e),t.write("L")):(t.write("i"),t.write(e)),t.write("\n")}}),e("String",{type:"reference",collect:function(){},dump_obj:function(){},dump_data:function(){},dump_ref:function(e,n,t){t.write("s"),t.write(e.length),t.write("\n"),t.write(e)}}),e("Undefined",{type:"reference",collect:function(){},dump_obj:function(){},dump_data:function(){},dump_ref:function(e,n,t){t.write("n")}}),t}),t("dumper",["handlers"],function(e){function n(){this.init()}return n.prototype.init=function(){this.objs=[],this.objs_id=[],this.priorities_objs=[],this.obj2state={},this.obj2newargs={},this.id2id={},this.id2obj=null},n.prototype.dump=function(n,t){this.collect(n),t.write("cereal1\n"),t.write(this.objs.length),t.write("\n");var r,u;for(r=0;r<this.objs.length;++r)u=this.objs[r],"undefined"==typeof u._id&&(u._id=++e.lastId),this.id2id[u._id]=r;for(r=0;r<this.objs.length;++r)u=this.objs[r],e.byType[e.getType(u)].dump_obj(u,this,t);for(r=0;r<this.objs.length;++r)u=this.objs[r],e.byType[e.getType(u)].dump_data(u,this,t);var i=e.byType[e.getType(n)];return null==i?(console.log("Dumper.dump - error: unknown type: %s",e.getType(n)),null):(i.dump_ref(n,this,t),void this.init())},n.prototype.undump=function(n){var t=n.read(8);if("cereal1\n"!=t)return""==t?(console.log("Dumper.undump - error: EOF"),null):(console.log("Dumper.undump - error: not a cerealizer buffer"),null);var r,u,i=parseInt(n.readline());for(this.id2obj=new Array(i),u=0;i>u;++u){var o=n.readline(),p=e.byName[o];if(void 0==p)return console.log("Dumper.undump - error: unknown class/type: %s",o),null;if(r=p.undump_obj(this,n),null==r)return console.log("Dumper.undump - error: unable to undump class/type: %s",o),null;this.id2obj[u]=r}for(u=0;i>u;++u)r=this.id2obj[u],e.byType[e.getType(r)].undump_data(r,this,n);var d=this.undump_ref(n);return this.init(),d},n.prototype.collect=function(n){var t=e.byType[e.getType(n)];return null==t?(console.log('Dumper.collect - error: unknown type "%s"',e.getType(n)),null):void t.collect(n,this)},n.prototype.undump_ref=function(e){var n=e.read(1);switch(n){case"i":return parseInt(e.readline());case"f":return parseFloat(e.readline());case"s":return e.read(parseInt(e.readline()));case"u":return e.read(parseInt(e.readline()));case"r":return this.id2obj[parseInt(e.readline())];case"n":return null;case"b":return Boolean(parseInt(e.read(1)));case"l":return parseInt(e.readline());case"c":var t=e.readline();return t.substr(0,t.length-1)}return console.log('Dumper.undump_ref - error: unknown type "%s"',n),null},n}),t("cerealizer",["buffer","dumper"],function(e,n){return{dump:function(){},load:function(){},dumps:function(t){var r=new e,u=new n;return u.dump(t,r),r.value},loads:function(t){var r=new e(t),u=new n;return u.undump(r)}}}),n("cerealizer")});
//# sourceMappingURL=cerealizer.js
//# sourceMappingURL=cerealizer.js.map